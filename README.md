# Fin-R1 Restoration Experiment

This repository contains all the scripts, prompts, outputs, and evaluation procedures for the controlled experiment described in the paper:

**"Restoring Syntactic Competence in Domain-Specialized LLMs via Minimal Supervision"**

---

## ğŸ“Œ Repository Name Suggestion

**`finr1-restoration-experiment`**

---

## ğŸ§ª Summary of the Experiment

### ğŸ¯ Hypothesis

This study tests the hypothesis that:
> *Minimal supervision using syntactically correct outputs previously generated by a domain-specialized LLM (Fin-R1) can restore its syntactic generation capabilities without degrading its semantic alignment to the domain.*

**H0**: There is no difference in syntactic correctness and semantic adequacy before and after restoration.  
**H1**: The LLM exhibits higher syntactic correctness and semantic adequacy after restoration.

### ğŸ”¬ Experimental Design

- **Model**: Fin-R1 (based on Qwen), specialized in finance using Q&A + RL.
- **Task**: Generate PlantUML use case diagrams for 100 functional specifications.
- **Procedure**:
  1. Generate baseline diagrams (pre-restoration).
  2. Apply restoration using 20 self-generated valid diagrams as few-shot exemplars.
  3. Re-generate outputs for the same 100 prompts (post-restoration).

### âš–ï¸ Evaluation

- **Syntactic Validity**: Diagram compiles or not (`plantuml -checkonly`).
- **Technical Completeness**: F1-score for actors, use cases, relationships.
- **Semantic Coherence**: Expert annotation.
- **Conceptual Articulation**: Expert rating on 3-point ordinal scale.
- **Rework Burden Index**: Composite metric combining all above.

---

## ğŸ› ï¸ Repository Structure

```
finr1-restoration-experiment/
â”‚
â”œâ”€â”€ prompts/
â”‚   â”œâ”€â”€ original_prompts.csv
â”‚   â”œâ”€â”€ fewshot_templates.json
â”‚
â”œâ”€â”€ responses/
â”‚   â”œâ”€â”€ pre_restoration_outputs.json
â”‚   â”œâ”€â”€ post_restoration_outputs.json
â”‚
â”œâ”€â”€ evaluation/
â”‚   â”œâ”€â”€ syntax_check_results.csv
â”‚   â”œâ”€â”€ component_extraction/
â”‚   â””â”€â”€ metrics_analysis/
â”‚
â”œâ”€â”€ scripts/
â”‚   â”œâ”€â”€ generate_prompts.py
â”‚   â”œâ”€â”€ submit_ollama.py
â”‚   â”œâ”€â”€ plantuml_syntax_check.py
â”‚   â””â”€â”€ extract_components.py
â”‚
â””â”€â”€ README.md
```

## âš™ï¸ Setup Instructions

1. Clone the repository and install requirements:
```bash
pip install -r requirements.txt
```

2. Ensure you have `ollama` running with Fin-R1 model:
```bash
ollama run fin-r1
```

3. Validate diagrams via PlantUML CLI:
```bash
plantuml -checkonly path/to/diagram.puml
```

---

## ğŸ“… Last Updated

2025-05-06
