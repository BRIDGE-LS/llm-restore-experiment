# Fin-R1 Restoration Experiment

This repository contains all the scripts, prompts, outputs, and evaluation procedures for the controlled experiment described in the paper:

**"Restoring Syntactic Competence in Domain-Specialized LLMs via Minimal Supervision"**

---

## 📌 Repository Name Suggestion

**`finr1-restoration-experiment`**

---

## 🧪 Summary of the Experiment

### 🎯 Hypothesis

This study tests the hypothesis that:
> *Minimal supervision using syntactically correct outputs previously generated by a domain-specialized LLM (Fin-R1) can restore its syntactic generation capabilities without degrading its semantic alignment to the domain.*

**H0**: There is no difference in syntactic correctness and semantic adequacy before and after restoration.  
**H1**: The LLM exhibits higher syntactic correctness and semantic adequacy after restoration.

### 🔬 Experimental Design

- **Model**: Fin-R1 (based on Qwen), specialized in finance using Q&A + RL.
- **Task**: Generate PlantUML use case diagrams for 100 functional specifications.
- **Procedure**:
  1. Generate baseline diagrams (pre-restoration).
  2. Apply restoration using 20 self-generated valid diagrams as few-shot exemplars.
  3. Re-generate outputs for the same 100 prompts (post-restoration).

### ⚖️ Evaluation

- **Syntactic Validity**: Diagram compiles or not (`plantuml -checkonly`).
- **Technical Completeness**: F1-score for actors, use cases, relationships.
- **Semantic Coherence**: Expert annotation.
- **Conceptual Articulation**: Expert rating on 3-point ordinal scale.
- **Rework Burden Index**: Composite metric combining all above.

---

## 🛠️ Repository Structure

```
finr1-restoration-experiment/
│
├── prompts/
│   ├── original_prompts.csv
│   ├── fewshot_templates.json
│
├── responses/
│   ├── pre_restoration_outputs.json
│   ├── post_restoration_outputs.json
│
├── evaluation/
│   ├── syntax_check_results.csv
│   ├── component_extraction/
│   └── metrics_analysis/
│
├── scripts/
│   ├── generate_prompts.py
│   ├── submit_ollama.py
│   ├── plantuml_syntax_check.py
│   └── extract_components.py
│
└── README.md
```

## ⚙️ Setup Instructions

1. Clone the repository and install requirements:
```bash
pip install -r requirements.txt
```

2. Ensure you have `ollama` running with Fin-R1 model:
```bash
ollama run fin-r1
```

3. Validate diagrams via PlantUML CLI:
```bash
plantuml -checkonly path/to/diagram.puml
```

---

## 📅 Last Updated

2025-05-06
